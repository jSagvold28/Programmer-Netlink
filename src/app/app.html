<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"  content="width=device-width, initial-scale=1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png" />
  <link rel="stylesheet" href="style.css">
  <link href="/dist/output.css" rel="stylesheet">
  <title>Programmer Netlink</title> 
  <style>
    .quick-options {
      display: flex; /* Use flexbox to place the images in a row */
      align-items: center; /* Center the images vertically */
    }

    .quick-options img {
      margin-right: 10px; /* Add some spacing between the images */
    }
  </style>
</head>

<body>

  

  <!-- <div id="logo">
    <img src="/assets/text-logo.jpg">
  </div> -->

    <!-- Button to show the modal -->
    <button onclick="showModal()" id="showModalBtn">
      <img src="/assets/svg/+.svg">
      <script>
// JavaScript
// JavaScript
function uploadImage() {
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*'; // Only allow image files

  fileInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const imageDataUrl = e.target.result;
        const textarea = document.getElementById('post-title');

        const imageBlob = dataURItoBlob(imageDataUrl);
        const blobURL = URL.createObjectURL(imageBlob);

        // Add blob URL to the textarea
        textarea.value = blobURL;

        // Save the blob URL to local storage
        localStorage.setItem('imageBlobURL', blobURL);
      };

      reader.readAsDataURL(file);
    }
  });

  // Trigger the file input dialog when the image is clicked
  fileInput.click();
}

function dataURItoBlob(dataURI) {
  const byteString = atob(dataURI.split(',')[1]);
  const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
  const ab = new ArrayBuffer(byteString.length);
  const ia = new Uint8Array(ab);
  for (let i = 0; i < byteString.length; i++) {
    ia[i] = byteString.charCodeAt(i);
  }
  return new Blob([ab], { type: mimeString });
}


      </script>
    </button>
    

 <!-- ... Rest of your HTML code ... -->

<!-- Modal container -->
<div class="modal-container" id="modalContainer">
  <div class="container">

    <!-- <h2 id="draftSnippetText">Draft a Snippet</h2> -->

    <form onsubmit="checkBannedWordsBeforeSubmit()">

      <textarea id="post-title" name="post-title" placeholder="Write about something..." minlength="10" maxlength="520" required></textarea>
      <br>
      <!-- Use onkeyup attribute here for the post-body textarea -->
      <textarea onkeyup="checkBanWords()" id="post-body" name="post-body" placeholder="Write about something..." rows="4" minlength="10" maxlength="74"></textarea>
      <br>
      <div class="add-tags" style="display: none;">
      </div>
      <div class="quick-options">
    <img src="/assets/svg/image.svg" onclick="redirectToSettings()" width="35px" height="35px" alt="profile settings">
    <img src="/assets/svg/tag.svg" onclick="logout()" width="35px" height="35px">
    <img src="/assets/svg/link.svg" onclick="createLink()" width="35px" height="35px">
  </div>

  <input id="shareSnippet" onclick="runBadWordTest()" type="image" src="/assets/svg/sendPostArrow.svg" alt="Image Description">
    </form>
  </div>
</div>



<!-- ... Rest of your HTML code ... -->


  <script>
     function toggleAppDrawer() {
        var profileSelector = document.getElementById("app-select");
        if (profileSelector.style.display === "none") {
        profileSelector.style.display = "block";
        } else {
        profileSelector.style.display = "none";
        }
        }

        function toggleProfileSelector() {
  var profileSelector = document.getElementById("profile-selector");
  if (profileSelector.style.display === "none") {
    profileSelector.style.display = "block";
  } else {
    profileSelector.style.display = "none";
  }
} 
function toggleContentMaker() {
        var profileSelector = document.getElementById("content-selector");
        if (profileSelector.style.display === "none") {
        profileSelector.style.display = "block";
        } else {
        profileSelector.style.display = "none";
        }
        }
  </script>

 <div class="quick-stuff">
   <img class="plus" src="/assets/svg/+.svg" onclick="toggleContentMaker()" height="40px" width="40px">
   <img class="account" src="/assets/svg/gear.svg" onclick="toggleProfileSelector()" height="40" width="40">
 </div>

  <div id="profile-selector" style="display: none;">
    <a href="http://127.0.0.1:5500/src/profile/profile.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/settingsIcons/person.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Profile</span>
    </a>
    <br>
    <a href="http://127.0.0.1:5500/src/events/events-home.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/settingsIcons/dashboard.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Dashboard</span>
    </a>
    <br>
    <a href="http://127.0.0.1:5500/src/events/events-home.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/settingsIcons/logout.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Logout</span>
    </a>

    <script>
      function toggleProfileSelector() {
var profileSelector = document.getElementById("profile-selector");
if (profileSelector.style.display === "none") {
profileSelector.style.display = "block";
} else {
profileSelector.style.display = "none";
}
}
    </script>
  </div>

  <div id="content-selector" style="display: none;">
    <a href="http://127.0.0.1:5500/src/articles/create/create-article.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/article.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Articles</span>
    </a>
    <br>
    <a href="http://127.0.0.1:5500/src/courses/courses.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/course.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Courses</span>
    </a>
    <br>
    <a href="http://127.0.0.1:5500/src/gigs/gigs.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/suitcase.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Gigs</span>
    </a>
    <br>
    <a href="http://127.0.0.1:5500/src/events/events-home.html" id="icon-link">
      <span id="icon"><img src="/assets/svg/navIcons/events.svg" alt="Calendar Icon" width="20px" height="20px"></span>
      <span id="text" style="color: #6B717E;">Events</span>
    </a>
    <br>
    <script>
  function toggleContentMaker() {
    var profileSelector = document.getElementById("content-selector");
    if (profileSelector.style.display === "none") {
    profileSelector.style.display = "block";
    } else {
  profileSelector.style.display = "none";
    }
    }
    </script>
  </div>

  <div id="app-select" style="display: none;">
    <a href="http://127.0.0.1:5500/articles/article.html">Articles</a>
    <br>
    <a class="no-underline" href="http://127.0.0.1:5500/courses/courses.html">Courses</a>
    <br>
    <a href="http://127.0.0.1:5500/gigs/gigs.html">Gigs</a>
    <br>
    <a href="http://127.0.0.1:5500/events/events-home.html">Events</a>
    <br>
    <a href="http://127.0.0.1:5500/communities/displayCreatedCommunities/created-communities.html">Communities</a>
<script>
    function toggleAppDrawer() {
    var profileSelector = document.getElementById("app-select");
    if (profileSelector.style.display === "none") {
    profileSelector.style.display = "block";
    } else {
    profileSelector.style.display = "none";
    }
    }
</script>
  </div>

 <div class="nav-menus" style="position: sticky; display: flex !important;">
  <div class="profile-image-container">
    

    <script>
      function displayProfileRelatedLinks() {
  var divElement = document.getElementById('profileLinks');

  // Set the display property of the div element to "block"
  divElement.style.display = 'block';
}

function displayMediaMaker() {

}
    </script>
  </div>

  <div id="profileLinks" class="profile-image-sub-container" style="display: none;">
    <a href="http://127.0.0.1:5500/profile/profile.html">Profile</a>
    <a href="http://127.0.0.1:5500/profile/dashboard/dashboard.html">Dashboard</a>
    <a href="http://127.0.0.1:5500/hook-page/hook.html">Log Out</a>
  </div>
  


  <nav role="navigation" style="display: none;">
    <div id="menuToggle">

      <input type="checkbox" id="myCheckbox" class="custom-checkbox">
      
      <span></span>
      <span></span>
      <span></span>
      
      <ul id="menu">
        <h4>Programmer Netlink | Navigation Menu</h4>
        <li><a class="active" href=""><u>Snippets (App)</u></a></li>
        <li><a class="active" href="http://127.0.0.1:5500/articles/article.html">Articles</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/profile/profile.html">Profile</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/profile/dashboard/dashboard.html#/bookmarks">Dashboard</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/podcasts/podcasts.html">Podcasts</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/courses/hm-page/courses.html">Courses</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/servers/server-page/server-page.html">Servers</a></li>
        <li><a class="active" href="http://127.0.0.1:5500/productivity/app/app-selector/selector.html">Productivity Suite</a></li>

        <div class="quick-options">
          <img src="/assets/svg/gear.svg" onclick="redirectToSettings()" width="35px" height="35px" alt="profile settings"> <img src="/assets/svg/logout.svg" onclick="logout()" width="35px" height="35px">

          <style>
            .quick-options {
  display: flex; /* Use flexbox to place the images in a row */
  align-items: center; /* Center the images vertically */
}

.quick-options img {
  margin-right: 10px; /* Add some spacing between the images */
}

          </style>
        </div>

      </ul>
      </div>
      </nav>
 </div>
    




<script>
  // Show modal container when user clicks "+" button
  document.getElementById("show-container").addEventListener("click", function() {
    document.querySelector(".modal-overlay").style.display = "flex";
  });

  // Hide modal container when user presses "Escape" key
  document.addEventListener("keydown", function(event) {
    if (event.key === "Escape") {
      document.querySelector(".modal-overlay").style.display = "none";
    }
  });

  // Add space character to body if toggle is checked
  const bodyField = document.getElementById("post-body");
  const toggleSpace = document.getElementById("toggle-space");
  
  toggleSpace.addEventListener("change", function() {
    if (toggleSpace.checked) {
      bodyField.removeAttribute("required");
      bodyField.disabled = true;
      bodyField.classList.add("disabled");
    } else {
      bodyField.setAttribute("required", "");
      bodyField.disabled = false;
      bodyField.classList.remove("disabled");
    }
  });

  bodyField.addEventListener("keydown", function(event) {
    if (toggleSpace.checked && event.key === " ") {
      event.preventDefault(); // Prevent default behavior of inserting a space
      const startPos = bodyField.selectionStart;
      const endPos = bodyField.selectionEnd;
      const newValue = bodyField.value.substring(0, startPos) + " " + bodyField.value.substring(endPos);
      bodyField.value = newValue;
      bodyField.selectionStart = bodyField.selectionEnd = startPos + 1;
    }
  });
</script>




    <div class="post-list">

      <div id="posts">
      </div>

    </div>
  </div>
<div id="popup"></div>

<script>
  const textarea = document.getElementById('post-title');
  const popup = document.getElementById('popup');

  textarea.addEventListener('keyup', function(event) {
    const text = textarea.value;
    const caretPosition = textarea.selectionStart;

    // Check if the # symbol was typed
    if (text.charAt(caretPosition - 1) === '#') {
      // Show the popup div
      popup.style.display = 'block';

      // Calculate the position for the popup
      const textareaRect = textarea.getBoundingClientRect();
      const caretCoordinates = getCaretCoordinates(textarea, caretPosition);
      const popupLeft = textareaRect.left + caretCoordinates.left;
      const popupTop = textareaRect.top + caretCoordinates.top + caretCoordinates.height;

      // Set the position of the popup
      popup.style.left = `${popupLeft}px`;
      popup.style.top = `${popupTop}px`;
    } else {
      // Hide the popup div if # is not present
      popup.style.display = 'none';
    }
  });

  // Helper function to get caret coordinates
  function getCaretCoordinates(element, position) {
    const clone = document.createElement('div');
    const computedStyle = getComputedStyle(element);

    for (const prop of computedStyle) {
      clone.style[prop] = computedStyle[prop];
    }

    clone.style.position = 'absolute';
    clone.style.visibility = 'hidden';
    clone.textContent = element.value.substring(0, position);

    document.body.appendChild(clone);
    const { top, left, height } = clone.getBoundingClientRect();
    document.body.removeChild(clone);

    return { top, left, height };
  }

      // Function to show the modal
    function showModal() {
      var modal = document.getElementById("modalContainer");
      modal.style.display = "flex";
    }

    // Function to hide the modal
    function hideModal() {
      var modal = document.getElementById("modalContainer");
      modal.style.display = "none";
    }
</script>

<script>
  // Function to show the modal
  function showModal() {
    var modal = document.getElementById("modalContainer");
    modal.style.display = "flex";
  }

  // Function to hide the modal
  function hideModal() {
    var modal = document.getElementById("modalContainer");
    modal.style.display = "none";
  }

  // Function to convert dataURI to blob
  function dataURItoBlob(dataURI) {
    // ... Your dataURItoBlob function ...
  }

  // Function to upload image and display it
  function uploadImage() {
    // ... Your previous uploadImage function ...

    // Display the image below the textarea
    const imageElement = document.createElement('img');
    imageElement.src = blobURL;
    imageElement.style.maxWidth = '100%';
    imageElement.style.maxHeight = '300px';

    const imageContainer = document.getElementById('imageContainer');
    imageContainer.innerHTML = ''; // Clear previous image (if any)
    imageContainer.appendChild(imageElement);
  }

  // Event listener for file input change
  document.addEventListener('DOMContentLoaded', () => {
    const savedBlobURL = localStorage.getItem('imageBlobURL');
    if (savedBlobURL) {
      const imageElement = document.createElement('img');
      imageElement.src = savedBlobURL;
      imageElement.style.maxWidth = '100%';
      imageElement.style.maxHeight = '300px';

      const imageContainer = document.getElementById('imageContainer');
      imageContainer.innerHTML = '';
      imageContainer.appendChild(imageElement);
    }
  });
</script>



</body>
<script src="script.js"></script>
<script src="addTagAdder.js"></script>
<script src="loadBlobImages.js"></script>
<script src="/components/languageFilter/checkBannedWords.js"></script>
<script src="/components/interact/scripts/like.js"></script>
<script src="/components/interact/scripts/dislike.js"></script>
</html>
